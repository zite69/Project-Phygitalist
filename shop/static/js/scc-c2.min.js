!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("scc-c2",[],e):"object"==typeof exports?exports["scc-c2"]=e():t["scc-c2"]=e()}(self,(()=>(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e);var n={};t.r(n),t.d(n,{_isDebug:()=>d,debug:()=>O,error:()=>g,info:()=>h,log:()=>h,setDebug:()=>b,warn:()=>w});var r={};t.r(r),t.d(r,{cmdLogEvent:()=>Yo,cmdLogPerf:()=>ti});var o,i,a,c,u,f=(o="",a={document:i=Object.create({get cookie(){return o},set cookie(t){o=t}})},c={},"undefined"==typeof window?{window:a,document:i,navigator:c}:{window:window||a,document:window.document||i,navigator:navigator||c}),s=function(){return f.window},l=function(){return f.document},p=function(){return f.navigator},y=function(){var t=s().location;return t&&t.hostname?t.hostname:""},v=function(){var t=y(),e=t.split("."),n=e.length;return n>2&&(t="".concat(e[n-2],".").concat(e[n-1]),2!==e[n-2].length&&3!==e[n-2].length||2!==e[n-1].length||(t="".concat(e[n-3],".").concat(t))),t},d=!1,b=function(t){d=!0===t||"true"===t},m=function(t){return s().console,function(){}},h=m(),g=m(),w=m(),O=function(){if(d){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];h.apply(null,e)}},j=function(t){if(s()[u])return s()[u][t]},S=function(t,e){s()[u]&&(s()[u][t]=e)},_=function(t,e){s()[t]=e,S(t,e)};function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function E(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==k(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===k(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}var T=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=t[n];try{if(e(n,r))return t}catch(t){}}return t},C=function(){for(var t={},e=0;e<arguments.length;e++){var n=e<0||arguments.length<=e?void 0:arguments[e];"object"===k(n)&&T(n,(function(e,n){t[e]=n}))}return t},x=function t(e){for(var n in e)void 0===e[n]?delete e[n]:"object"===k(e[n])&&(t(e[n]),0===Object.keys(e[n]).length&&delete e[n]);return e},I=function(t){if(2===t.length)return t[1]},R=function(t,e,n){if("string"!=typeof t)return{};for(var r={},o=t.split(e),i=0;i<o.length;i++){var a=o[i].split(n);r[a[0]]=I(a)}return r},L=function(t,e,n){var r=[];return T(t,(function(t,e){r.push("".concat(t).concat(n).concat(e))})),0===r.length?"":r.join(e)},D=function t(e,n){return n&&(e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){E(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e)),Object.keys(e).forEach((function(r){if("object"===k(e[r])){var o=t(e[r],n);n&&(e[r]=o)}})),Object.freeze(e)},A=function(t,e){if(void 0===t)return t;void 0===e&&(e=2);for(var n=String(t);n.length<e;)n="0"+n;return n},M=function(t){if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]||void 0!==t)return!0===t||1===t||"string"==typeof t&&("true"===t.toLowerCase()||"1"===t)},B=function(t){var e=parseInt(t,10);if(!isNaN(e))return e},q=function(t){return/^-?\d+$/.test(t)},F=function(){return function(t){var e=t.getUTCFullYear()+"-"+A(t.getUTCMonth()+1);if(e+="-"+A(t.getUTCDate())+"T"+A(t.getUTCHours())+":",e+=A(t.getUTCMinutes())+":"+A(t.getUTCSeconds()),t.getUTCMilliseconds){var n=t.getUTCMilliseconds();q(n)&&(e+="."+String((n/1e3).toFixed(3)).slice(2,5))}return e+"Z"}(new Date)},U=function(t){return"[object Array]"===Object.prototype.toString.call(t)},V=function(t,e){U(t)&&t.push({timestamp:F(),data:e})};function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,z(r.key),r)}}function z(t){var e=function(t,e){if("object"!==N(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===N(e)?e:String(e)}const W=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.properties=e?function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?K(Object(n),!0).forEach((function(e){var r,o,i;r=t,o=e,i=n[e],(o=z(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e):{}}var e,n;return e=t,(n=[{key:"clear",value:function(){this.properties={}}},{key:"get",value:function(t){if(this.properties.hasOwnProperty(t))return this.properties[t]}},{key:"set",value:function(t,e){this.properties[t]=e}},{key:"isSet",value:function(t){if(this.properties.hasOwnProperty(t))return!0}},{key:"delete",value:function(t){delete this.properties[t]}},{key:"getProperties",value:function(t){var e={},n=function(){return!1};return t||"function"!=typeof t||(n=t),T(this.properties,(function(t,r){n(t)||(e[t]=r)})),e}},{key:"merge",value:function(e){var n=this,r=e;r instanceof t&&(r=e.getProperties()),T(r,(function(t,e){n.set(t,e)}))}}])&&G(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();var $,H={},Q={"first-paint":"fp","first-contentful-paint":"fcp"},J=["connectEnd","connectStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domLoading","domainLookupEnd","domainLookupStart","fetchStart","navigationStart","requestStart","responseEnd","responseStart","loadEventStart","loadEventEnd"],Z=["transferSize","encodedBodySize","decodedBodySize"],X=function(t,e){for(var n={},r=0;r<e.length;r++){var o=e[r],i=t[o];void 0!==i&&(n[o]=Math.round(i))}return n},Y=function(t){return X(t,J)},tt=function(t){return X(t,Z)},et=function(t,e){var n=new W;"tcc"===t&&n.set("tccin",e||"na");try{($=s().performance)&&$.timing?(function(t){if(t.merge(Y($.timing)),$.getEntriesByName){var e=$.getEntriesByName(l().location.href)[0];if(!e&&$.getEntriesByType){var n=$.getEntriesByType("navigation");e=n[n.length-1]}e&&(t.merge(tt(e)),t.set("navigationType",e.type))}}(n),"tcc"===t&&(function(t){if($.getEntriesByType){var e=$.getEntriesByType("mark");if(U(e)){t.set("marks",e.slice(0,10).map((function(t){return{name:t.name,startTime:Math.round(t.startTime)}})));var n=$.getEntriesByType("measure");U(n)&&t.set("measures",n.slice(0,10).map((function(t){return{name:t.name,duration:Math.round(t.duration)}})))}}}(n),function(t){if($.getEntriesByType){var e=$.getEntriesByType("paint");e&&e.forEach((function(e){t.set(Q[e.name],Math.round(e.startTime))}))}}(n))):("tcc"===t&&n.set("tccperfapi","not supported"),g("Error loading performance lib"))}catch(t){g("_collect unable to get performance data",t)}return n.getProperties()},nt=function(t,e,n){setTimeout((function(){s()._expDataLayer=s()._expDataLayer||[],s()._expDataLayer.push({schema:"add_perf",version:"v1",data:"tcc"===t?{type:"pageperf",properties:C(e,H,{nav_type:"hard"}),custom_properties:n}:{timing_object:C(e,H),is_hard_navigation:!0,custom_properties:n}})}),0)},rt=function(){return!($=s().performance)||!$.timing||$.timing.loadEventStart>0},ot=!1;function it(t){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(t)}function at(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==it(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==it(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===it(o)?o:String(o)),r)}var o}var ct,ut=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._loaded=!1,this._onLoadFns=[],e?this._loaded=!0:n(this._triggerOnLoad.bind(this))}var e,n;return e=t,(n=[{key:"_executeFn",value:function(t){try{t()}catch(e){g("Exception while executing onLoad callback",t,e)}}},{key:"_triggerOnLoad",value:function(){this._loaded=!0;for(var t=0;t<this._onLoadFns.length;t++)this._executeFn(this._onLoadFns[t])}},{key:"registerOnLoadFn",value:function(t){(function(t){return t&&"[object Function]"==={}.toString.call(t)})(t)&&(this._loaded?this._executeFn(t):this._onLoadFns.push(t))}}])&&at(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),ft=s().Request,st=ft&&"keepalive"in new ft(""),lt=void 0!==p().sendBeacon,pt=function(t,e,n,r){var o=s().XMLHttpRequest;if(o){var i=new o;i.open(e,t,!0),T(r,(function(t,e){i.setRequestHeader(t,e)})),i.send(n)}},yt=function(t,e,n,r,o,i,a){var c=C({},i),u=r?JSON.stringify(r):null;if("POST"===n&&(c["Content-Type"]="application/json"),lt&&!c.Authorization&&"POST"===n)try{var f=s().Blob;p().sendBeacon(t,new f([u],c))}catch(e){pt(t,n,u,c)}else!function(t,e,n,r,o){var i=s().fetch;st&&i?i(t,{keepalive:!0,method:e,headers:r,body:n,credentials:o}).catch((function(o){pt(t,e,n,r)})):pt(t,e,n,r)}(t,n,u,c,a);!function(t,e,n,r,o){var i={endpoint:e,queryParams:n,method:r,payload:o};V(j(t),i)}(o,t,e,n,r)},vt=function(t,e){var n=j("config")[t];if(n&&e)return n[e]},dt=[{name:"EMAIL",regex:/[^@^=]+@[^@]+\.[^@^&]+/}],bt=function(t,e){if("string"!=typeof t)return t;for(var n=t,r=0;r<dt.length;r++)for(var o=dt[r].regex,i=n.match(o);i&&i[0];)i=(n=n.replace(i[0],"REDACTED")).match(o);return n},mt=function(t){return(t=t||s().location.search)?("?","?"===t.substr(0,1)&&(t=t.substring(1)),t.split("&")):[]},ht=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"https://".concat(t?t+".":"").concat(function(){if(ct)return ct;var t=v();if("secureserver.net"===(t=function(t){var e=t||v();return e.indexOf("godaddy.com")>=0||e.indexOf("secureserver.net")>=0}(t)?t:"secureserver.net")){var e=vt("build","env");t="prod"===e?t:"".concat(e,"-").concat(t)}return ct=t}())};function gt(t){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gt(t)}function wt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,f=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){f=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(f)throw o}}return c}}(t,e)||Ot(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(t,e){if(t){if("string"==typeof t)return jt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jt(t,e):void 0}}function jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function St(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==gt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===gt(o)?o:String(o)),r)}var o}const _t=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._eventQueue=[],this._sendBatchCallback=e,this._maxEvents=r,this._bindUnload(),this._processInterval=setInterval((function(){n._sendBatch()}),250)}var e,n;return e=t,(n=[{key:"_bindUnload",value:function(){var t=this,e=this.flush.bind(this),n=s().attachEvent,r=s().addEventListener,o=l().addEventListener;r?(r("beforeunload",e,!1),r("pagehide",e,!1)):n&&n("beforeunload",e),o&&o("visibilitychange",function(){"hidden"===l().visibilityState&&t.flush()}.bind(this))}},{key:"_sendRequests",value:function(t){var e=this;Object.entries(t).forEach((function(t){var n=wt(t,2),r=n[0],o=n[1];try{var i=wt(r.split("|"),2),a=i[0],c={schemaId:i[1],data:[]};Object.values(o).forEach((function(t){if(t.events.length>10)for(var e=t.events.length/10,n=0;n<e;n++)c.data.push(C(t,{events:t.events.slice(10*n,10*n+10)}));else c.data.push(t)})),e._sendBatchCallback(c,a)}catch(t){g("Failed to send request: ".concat(t))}}))}},{key:"pushEvent",value:function(t,e){e||!st&&!lt?this._sendBatch(t):this._eventQueue.push(t)}},{key:"_getRequestBatch",value:function(t,e,n){var r=n.apiKey,o=n.schemaId,i=n.global,a=n.contextVersion,c=n.businessContext,u="".concat(r,"|").concat(o),f=t[u]||{};t[u]=f;var s=0;c&&(e.push(c),s=e.length);var l="".concat(a,"|").concat(s);return{batch:f[l]||{global:i,businessContext:c,events:[]},batchKey:l,request:f}}},{key:"_processEvent",value:function(t,e,n){var r,o,i=this._getRequestBatch(t,e,n),a=i.batch,c=i.batchKey,u=i.request;return(r=a.events).push.apply(r,function(t){if(Array.isArray(t))return jt(t)}(o=n.events.slice(0,this._maxEvents))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||Ot(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n.events.length>this._maxEvents&&this.pushEvent(C(n,{events:n.events.slice(this._maxEvents)})),u[c]=a,Math.min(n.events.length,this._maxEvents)}},{key:"_sendBatch",value:function(t){var e=0,n={},r=[];for(t&&(e+=this._processEvent(n,r,t));this._eventQueue.length>0&&e<this._maxEvents;)e+=this._processEvent(n,r,this._eventQueue.shift());this._sendRequests(n)}},{key:"flush",value:function(){for(;this._eventQueue.length>0;)this._sendBatch()}}])&&St(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();var Pt,Et="_eventBusSendLog",kt=function(t,e){yt("".concat(ht("csp"),"/eventbus"),null,"POST",t,Et,{Authorization:"api-key ".concat(e)})};function Tt(t){return Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tt(t)}function Ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Tt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Tt(o)?o:String(o)),r)}var o}function xt(){return xt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},xt.apply(this,arguments)}function It(t,e){return It=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},It(t,e)}function Rt(t){return Rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rt(t)}var Lt=function(t){try{return JSON.parse(t)}catch(t){return{}}};const Dt=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&It(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Rt(r);if(o){var n=Rt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Tt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t))._updateWindow(),e}return e=a,(n=[{key:"_updateWindow",value:function(){S("config",D(this.properties,!0))}},{key:"set",value:function(t,e){xt(Rt(a.prototype),"set",this).call(this,t,e),this._updateWindow()}},{key:"merge",value:function(t){xt(Rt(a.prototype),"merge",this).call(this,t),this._updateWindow()}}])&&Ct(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(W))({build:{env:"prod",date:"2024-09-24T20:54:47.493Z"},client:{name:"scc-c2",version:"0.4.7"},cookie:{sameSite:"none"},site:{privateLabelId:""},sGtm:{enabled:M(""),whitelist:Lt(""),account:"",host:""},ga:{account:""},wGtm:{enabled:M(""),requireGoogleClientId:M(""),whitelist:Lt(""),account:""},eventBus:{enabled:M("true"),sccApiKey:"b18ef4f046435b64a469b32c3c1c20a3",rigorApiKey:"8da2217409854bee82e12dc4ca0b39fb"},clickListener:{enabled:!0,navDelayMs:75},timing:{auto:!0},webVitals:{enabled:!0,url:""},consent:{delayMs:500}});var At,Mt,Bt,qt=function(t,e){var n=Dt.get(t);if(n&&e)return n[e]},Ft=function(t,e,n){var r=Dt.get(t),o=r||{};r||Dt.set(t,o),o[e]=n};function Ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Vt,Nt,Kt=[],Gt={},zt=0,Wt=function(t){var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Ut(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ut(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(Vt);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(t.startsWith("".concat(r,".")))return!1}}catch(t){n.e(t)}finally{n.f()}return!0},$t=function(t,e){"debug"===t&&b(e)},Ht=function(){var t,e,n=function(){for(var t={},e=0;e<Mt.length;e++){var n=Mt[e];T(n,(function(e,n){-1===Nt.indexOf(e.toLowerCase())&&($t(e,n),Wt(e)||(t[e]=n))}))}return t}();e={identity:{realm:(t=n)["".concat(At,".realm")]},site:{privateLabelId:t["".concat(At,".privateLabelId")]},timing:{auto:!M(t["".concat(At,".manualPagePerf")],!1)},page:{spa:t["".concat(At,".spa")],id:t["".concat(At,".pageId")],contentGroup:t["".concat(At,".gaContentGroup")]||t["".concat(At,".contentGroup")],referrerExclusion:t["".concat(At,".referrerExclusion")]},cookie:{sameSite:t["".concat(At,".cookies.sameSite")]},wGtm:{enabled:M(t["".concat(At,".webGtmEnabled")],!1)},clickListener:{enabled:!M(t["".concat(At,".listenerDisabled")],!1),navDelayMs:t["".concat(At,".eventDelayMs")]}},Object.keys(e).forEach((function(t){Object.keys(e[t]).forEach((function(n){var r=e[t][n];void 0!==r&&Ft(t,n,r)}))})),Dt.merge(n),V(Kt,n)};const Qt={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Jt;const Zt=new Uint8Array(16);function Xt(){if(!Jt&&(Jt="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Jt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Jt(Zt)}const Yt=[];for(let t=0;t<256;++t)Yt.push((t+256).toString(16).slice(1));const te=function(t,e,n){if(Qt.randomUUID&&!e&&!t)return Qt.randomUUID();const r=(t=t||{}).random||(t.rng||Xt)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=r[t];return e}return function(t,e=0){return Yt[t[e+0]]+Yt[t[e+1]]+Yt[t[e+2]]+Yt[t[e+3]]+"-"+Yt[t[e+4]]+Yt[t[e+5]]+"-"+Yt[t[e+6]]+Yt[t[e+7]]+"-"+Yt[t[e+8]]+Yt[t[e+9]]+"-"+Yt[t[e+10]]+Yt[t[e+11]]+Yt[t[e+12]]+Yt[t[e+13]]+Yt[t[e+14]]+Yt[t[e+15]]}(r)};var ee=function(){return te()};function ne(t){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ne(t)}function re(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==ne(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===ne(o)?o:String(o)),r)}var o}var ie=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataLayerNames=e,this.dataLayerLog=[],this.asyncCommands=[],this.loaded=!1,this.dataLayers=[],this.dataLayerNames.forEach((function(t){var e,r,o=s()[t];U(o)&&(e=n.asyncCommands).push.apply(e,function(t){if(Array.isArray(t))return re(t)}(r=o)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return re(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?re(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),_(t,n),n.dataLayers.push(o)}))}var e,n;return e=t,(n=[{key:"start",value:function(){this.loadAsyncCommands()}},{key:"pushLog",value:function(t){V(this.dataLayerLog,t)}},{key:"process",value:function(){}},{key:"push",value:function(t){this.loaded?this.process(t):this.asyncCommands.push(t)}},{key:"loadAsyncCommands",value:function(){for(;this.asyncCommands.length>0;)this.process(this.asyncCommands.shift());this.loaded=!0}}])&&oe(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ae(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ce(t){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ce(t)}function ue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==ce(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===ce(o)?o:String(o)),r)}var o}function se(t,e,n){return e&&fe(t.prototype,e),n&&fe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var le=function(){function t(e,n){if(ue(this,t),!e)throw"Missing version definitions";this._versionedDefinitions=e,this._interfaceType=n}return se(t,[{key:"getInterface",value:function(t,e){var n=this._versionedDefinitions[e];if(n)return n}}]),t}(),pe=function(){function t(e){if(ue(this,t),!e)throw"Missing type definitions";this._typeVersionDefinitionMap=e}return se(t,[{key:"getInterface",value:function(t,e,n){var r=this._typeVersionDefinitionMap[n];if(r)return r.getInterface(t,e)}}]),t}(),ye={},ve=function(t){for(var e=function(){var t,e,o=(t=r[n],e=2,function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,f=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){f=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(f)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ae(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];if(U(a)){var c={};a.forEach((function(t){var e={};Object.keys(t).forEach((function(n){"type"!==n&&(e[n]=t[n])})),c[t.type]=new le(e,t.type)})),ye[i]=new pe(c)}else ye[i]=new le(a)},n=0,r=Object.entries(t);n<r.length;n++)e()},de="string",be=/^([\w-]+)$/,me=/^([\w/-]+)$/,he="OPTIONAL",ge="REQUIRED",we="map";function Oe(){return Oe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pe(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Oe.apply(this,arguments)}function je(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Se(t,e)}function Se(t,e){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Se(t,e)}function _e(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Pe(t);if(e){var o=Pe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Ce(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Pe(t){return Pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pe(t)}function Ee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Ce(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Ce(o)?o:String(o)),r)}var o}function Te(t,e,n){return e&&ke(t.prototype,e),n&&ke(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ce(t){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ce(t)}var xe=function(t,e,n){var r;if("CALCULATED"!==e._fieldType){var o=t[e.name];"sub"===e._resolutionType&&(o=t),r=e.parse(o)}var i=Ce(e.transformFn);if("undefined"!==i){var a=U(e.transformFn);if("function"===i||a)for(var c=a?e.transformFn:[e.transformFn],u=0;u<c.length;u++)r=c[u](r,n);else r=e.transformFn}return e._outputType&&e._outputType===de&&(r=r.toString()),r},Ie=function(){function t(e){Ee(this,t),this.name=e,this.properties=[],this.definitionType="",this._outputType,this._resolutionType=we,this._fieldType=he,this.outputKey,this.allowedValuesList=[]}return Te(t,[{key:"parse",value:function(t){if(this.validate(t),this._fieldType!==he||t||"boolean"==typeof t||0===t){for(var e=new W,n=0;n<this.properties.length;n++){var r=this.properties[n],o=xe(t,r,e.getProperties());r._resolutionType===we?e.set(r.outputKey||r.name,o):e.merge(o)}return e.getProperties()}}},{key:"validate",value:function(t){if(this._fieldType===ge&&!t&&"boolean"!=typeof t&&0!==t)throw"Missing required property '".concat(this.name,"'");if(this.allowedValuesList.length>0&&!this.allowedValuesList.includes(t))throw"Input '".concat(t,"' for property '").concat(this.name,"' is not one of the allowed values (").concat(this.allowedValuesList,").")}},{key:"optional",value:function(){return this._fieldType=he,this}},{key:"required",value:function(){return this._fieldType=ge,this}},{key:"stringify",value:function(){for(var t=new W,e=0;e<this.properties.length;e++){var n=this.properties[e];t.merge(n.stringify())}return t.getProperties()}},{key:"transform",value:function(t){return this.transformFn=t,this}},{key:"transformKey",value:function(t){return this.outputKey=t,this}},{key:"allowedValues",value:function(t){return this.allowedValuesList=t,this}},{key:"outputType",value:function(t){return this._outputType=t,this}}]),t}(),Re=function(t){je(n,t);var e=_e(n);function n(t,r){var o;return Ee(this,n),(o=e.call(this,t)).definitionType="Schema",o.properties=r,o}return Te(n,[{key:"parse",value:function(t){var e;if(this.properties&&this.properties.length>0)try{e=Oe(Pe(n.prototype),"parse",this).call(this,t||{})}catch(t){throw""}return Object.freeze(e)}}]),n}(Ie),Le=function(t){je(n,t);var e=_e(n);function n(){return Ee(this,n),e.apply(this,arguments)}return Te(n,[{key:"parse",value:function(t){return this.validate(t),t}},{key:"stringify",value:function(){var t={};return t[this.name]=this._fieldType,t}}]),n}(Ie),De=function(t){je(n,t);var e=_e(n);function n(){return Ee(this,n),e.apply(this,arguments)}return Te(n,[{key:"pattern",value:function(t){return this._pattern=t,this}},{key:"validate",value:function(t){Oe(Pe(n.prototype),"validate",this).call(this,t);var e=Ce(t);if("string"===e){if(this._pattern&&!t.match(this._pattern))throw"Input ".concat(t," does not match ").concat(this._pattern)}else if("undefined"!==e&&null!=t)throw"Input is not a string"}},{key:"stringify",value:function(){var t=Oe(Pe(n.prototype),"stringify",this).call(this),e=this._pattern?" | pattern: ".concat(this._pattern):"";return t[this.name]="".concat(t[this.name]," | type: string").concat(e),t}}]),n}(Le),Ae=function(t){je(n,t);var e=_e(n);function n(){var t;return Ee(this,n),(t=e.call(this)).definitionType="Object",t}return Te(n,[{key:"stringify",value:function(){if(this._resolutionType===we){var t={};return t["".concat(this.name," (").concat(this._fieldType,")")]=Oe(Pe(n.prototype),"stringify",this).call(this),t}return Oe(Pe(n.prototype),"stringify",this).call(this)}},{key:"substitute",value:function(t){return this.properties=this.properties.concat(t),this._resolutionType="sub",this}},{key:"map",value:function(t,e){return this.name=t,this.properties=this.properties.concat(e),this._resolutionType=we,this}},{key:"extend",value:function(t){return t&&(this.properties=this.properties.concat(t)),this}}]),n}(Ie),Me=function(t){je(n,t);var e=_e(n);function n(){var t;return Ee(this,n),(t=e.call(this)).definitionType="Collection",t.minElements=0,t}return Te(n,[{key:"parse",value:function(t){if(this.minElements&&(!t||t.length<this.minElements))throw"";if(void 0!==t){if(!U(t))throw"";return t.map(Oe(Pe(n.prototype),"parse",this).bind(this))}}},{key:"stringify",value:function(){if(this._resolutionType===we){var t={};t["".concat(this.minElements,"...n")]=Oe(Pe(n.prototype),"stringify",this).call(this)["".concat(this.name," (").concat(this._fieldType,")")];var e={};return e["".concat(this.name," (").concat(this._fieldType,")")]=t,e}return Oe(Pe(n.prototype),"stringify",this).call(this)}},{key:"withMinElements",value:function(t){return this.minElements=t,this._fieldType=t>0?ge:he,this}}]),n}(Ae);function Be(t){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Be(t)}function qe(t){return function(t){if(Array.isArray(t))return Fe(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Fe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Be(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Be(o)?o:String(o)),r)}var o}function Ve(){return Ve="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ke(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Ve.apply(this,arguments)}function Ne(t,e){return Ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ne(t,e)}function Ke(t){return Ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ke(t)}var Ge=["_expDataLayer","_signalsDataLayer"],ze=["add_virtual_page_view","set_config","subscribe"],We=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ne(t,e)}(c,t);var e,r,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ke(o);if(i){var n=Ke(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Be(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function c(t){var e,n=t.pageViewSchema,r=t.autoPageViewDisabled,o=t.beforeEvent,i=t.immediateSchemas,u=void 0===i?[]:i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=a.call(this,Ge)).pageViewSchema=n,e.autoPageViewDisabled=r,e.beforeEvent=o,e.immediateSchemas=[ze].concat(qe(u)),e._initEvents(),e}return e=c,(r=[{key:"push",value:function(t){return this.immediateSchemas.includes(t.schema)?this.process(t):Ve(Ke(c.prototype),"push",this).call(this,t)}},{key:"_initEvents",value:function(){for(var t=!this.autoPageViewDisabled,e=this.asyncCommands.length-1;e>=0;e--){var n=this.asyncCommands[e];n.schema!==this.pageViewSchema||n.data&&n.data.virtual_path||(t=!1),"set_config"===n.schema&&this.process.apply(this,qe(this.asyncCommands.splice(e,1)))}t&&this.process({schema:this.pageViewSchema})}},{key:"process",value:function(t){Ve(Ke(c.prototype),"pushLog",this).call(this,t);try{var e=t.data,r=t.schema||t.interface,o=t.type,i=t.version||"v1",a=t.targets||[],u={eventId:ee()};this.beforeEvent&&this.beforeEvent(),function(){for(;zt<Mt.length;){var t=Mt[zt];T(t,(function(t,e){-1===Nt.indexOf(t.toLowerCase())&&Wt(t)&&($t(t,e),Gt[t]=e)})),zt++}}(),function(t,e,n,r,o,i){var a=function(t,e,n){var r=ye[t];if(r)return r.getInterface(t,n,e)}(t,e,n),c=new Re(t,a.properties).parse(r)||{},u=new a.handler(c,e,n,o,i);u.preProcess(c),u.process(c)}(r,o,i,e,u,a)}catch(e){var f=["Unable to process",t,"\n\n"];g.apply(n,f.concat(e))}}}])&&Ue(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(ie);function $e(t){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$e(t)}function He(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==$e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==$e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===$e(o)?o:String(o)),r)}var o}function Qe(){return Qe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ze(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Qe.apply(this,arguments)}function Je(t,e){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Je(t,e)}function Ze(t){return Ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ze(t)}var Xe=["_trfq"],Ye=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Je(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ze(r);if(o){var n=Ze(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===$e(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,Xe)).handlers=t,e.start(),e}return e=a,(n=[{key:"process",value:function(t){Qe(Ze(a.prototype),"pushLog",this).call(this,t);try{var e=Array.prototype.slice.call(t,1),n=t[0];this.handlers[n]?this.handlers[n].apply(null,e):g("Invalid command sent to data layer",this.dataLayerName,t)}catch(e){g("Unable to process",t,e)}}}])&&He(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(ie);const tn=new W;var en,nn,rn,on=function(t,e,n,r){var o=vt("cookie","sameSite")||"",i=new Date;i.setTime(i.getTime()+60*n*1e3),l().cookie="".concat(t,"=").concat(encodeURI(e),"; domain=").concat(v(),"; ")+(n?"expires=".concat(i.toGMTString(),"; "):"")+(r?"path=".concat(r,"; "):"")+(o?"SameSite=".concat(o,"; "):"")+("NONE"===o.toUpperCase()?" Secure;":"")},an=function(t){var e=l().cookie;return nn!==e&&(rn=function(t){for(var e=t.split(";"),n=Object.create(null),r=0;r<e.length;r++){var o=/([^=]*)*=([\s\S]*)/.exec(e[r]);if(o&&o[2]){var i=o[1].trim(),a=decodeURIComponent(o[2].trim());n[i]=a}}return n}(e),nn=e),rn[t]},cn=function(t){var e=an(t);return R(e,"&","=")},un=function(){var t,e=l().querySelector("meta[name='gd:traceId']");return e&&(t=e.getAttribute("content")),t&&!Dt.get("tcc.disablePageTracing")?{trace_id:t,traced:1}:{trace_id:ee().replace(/-/g,"")}},fn="experiments";const sn=new W;function ln(t){return ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ln(t)}function pn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,f=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){f=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(f)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return yn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yn(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function dn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vn(Object(n),!0).forEach((function(e){var r,o,i;r=t,o=e,i=n[e],(o=mn(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function bn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mn(r.key),r)}}function mn(t){var e=function(t,e){if("object"!==ln(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ln(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ln(e)?e:String(e)}var hn=function(){function t(e){var n=e.contextFnMap,r=e.paramsFnMap,o=void 0===r?{}:r,i=e.windowName;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._contextFnMap=n,this._paramsFnMap=o,this._windowName=i}var e,n;return e=t,(n=[{key:"init",value:function(t){var e=t.context,n=void 0===e?{}:e,r=t.contextFnMap,o=void 0===r?{}:r,i=t.paramsFnMap,a=void 0===i?{}:i;this.version=0,this.context=n,this._initialContext=dn({},n),this._contextMap={},this._contextFnMap=C(this._contextFnMap,o),this._paramsFnMap=C(this._paramsFnMap,a)}},{key:"_buildContext",value:function(t){var e=dn({},this._initialContext);return Object.entries(t).forEach((function(t){var n,r=pn(t,2),o=r[0],i=r[1],a=o.split("."),c=e;a.forEach((function(t,e){e<a.length-1?(c[t]=c[t]||{},c=c[t]):n=t})),c[n]=i})),e}},{key:"updateContext",value:function(){var t=this;if(this._contextFnMap){var e=!1,n={},r={};Object.entries(this._paramsFnMap).forEach((function(t){var e=pn(t,2),n=e[0],o=e[1];try{r[n]=o()}catch(t){g("Error executing paramsFnMap for key: ".concat(n),t)}})),Object.entries(this._contextFnMap).forEach((function(o){var i=pn(o,2),a=i[0],c=(0,i[1])(r);t._contextMap[a]!==c&&(e=!0),void 0!==c&&(n[a]=c)})),e&&(this.version++,this.context=D(this._buildContext(n)),this._contextMap=n,this._windowName&&S(this._windowName,this.context))}}}])&&bn(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();const gn=new hn({contextFnMap:{experiments:function(){return sn.get("experiments")}}});var wn={"godaddy.com":1,"mediatemple.net":4500,"afternic.com":497036},On=[function(){return qt("site","privateLabelId")},function(){return function(t,e,n){for(var r=mt(n),o=r.length-1;o>=0;o--){var i=r[o].split("=");if(e){if((i[0]+"").toLowerCase()===(t+"").toLowerCase())return i[1]}else if(i[0]===t)return i[1]}}("plid")},function(){var t=v().replace("dev-","").replace("test-","").replace("stg-","");if(wn.hasOwnProperty(t))return wn[t]}],jn=function(){for(var t=0;t<On.length;t++){var e=On[t]();if(e&&q(e))return B(e)}};function Sn(t){return Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sn(t)}function _n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Sn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Sn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Sn(o)?o:String(o)),r)}var o}function Pn(){return Pn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Pn.apply(this,arguments)}function En(t,e){return En=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},En(t,e)}function kn(t){return kn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kn(t)}var Tn={"client.userAgent":function(){return p().userAgent},"client.sdk.name":function(){return qt("client","name")},"client.sdk.version":function(){return qt("client","version")},"client.device.viewportWidth":function(t){var e=t.win,n=t.doc;return B(e.innerWidth?e.innerWidth:n.body.offsetWidth)},"client.device.viewportHeight":function(t){var e=t.win,n=t.doc;return B(e.innerHeight?e.innerHeight:n.body.offsetHeight)},"client.device.screenResolutionWidth":function(t){var e=t.win;return B(e.screen.width)},"client.device.screenResolutionHeight":function(t){var e=t.win;return B(e.screen.height)},"page.id":function(){return qt("page","id")},"page.traceId":function(){return tn.get("trace_id")},"page.contentGroup":function(){return function(){var t=qt("page","contentGroup");if("string"!=typeof t)return t;for(var e=t.split("/"),n=e.length-1;n>=0;n--)e[n]=e[n].trim(),e[n]||e.splice(n,1);if(e.length>0)for(;e.length<3;)e.push("Other");return e.join(" / ")}()},"page.host":function(){return y()},"page.path":function(t){return t.win.location.pathname},"page.virtualPath":function(){return tn.get("virtual_path")},"page.location":function(){return n=(t=mt()).length?(function(t){for(var e=0;e<t.length;e++){var n=t[e].split("="),r=!1,o=n[1];o!==decodeURIComponent(n[1])&&(o=decodeURIComponent(n[1]),r=!0);var i=bt(o);r&&(i=encodeURIComponent(i)),t[e]="".concat(n[0],"=").concat(i)}}(t),"?"+t.join("&")):"",(r=s().location)&&(e="".concat(r.protocol,"//").concat(r.hostname).concat(r.pathname)),n&&(e="".concat(e).concat(n)),e;var t,e,n,r},"page.referrer":function(t){return t.doc.referrer},"site.privateLabelId":function(){return jn()}},Cn={win:s,doc:l};const xn=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&En(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=kn(r);if(o){var n=kn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Sn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"init",value:function(t){var e=t.traceId,n=t.contextFnMap,r=t.paramsFnMap;Pn(kn(a.prototype),"init",this).call(this,{context:{traceId:e},contextFnMap:n,paramsFnMap:r})}}])&&_n(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(hn))({contextFnMap:Tn,paramsFnMap:Cn,windowName:"globalContext"});var In=["events"];function Rn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ln={},Dn=["routing","webContext"],An=function(t,e,n){var r=e.callback;setTimeout((function(){try{r(n)}catch(e){g("Failed to push datalayer event to subscriber (".concat(t,") callback"),e)}}),0)},Mn=function(t,e,n){var r=e.schemaIds,o=function(t,e){e.events;var n=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(e,In),r=t.fields||[];return Dn.forEach((function(t){r.includes(t)||delete n[t]})),n}(e,n);e.batch?(o.events=r?n.events.filter((function(t){return r.includes(t.schemaId)})):n.events,o.events.length>0&&An(t,e,o)):n.events.forEach((function(n){r&&!r.includes(n.schemaId)||An(t,e,C(o,{event:n}))}))},Bn=function(t,e){var n=Un();n.length>=qn&&w("".concat(t," subscribed to SCC after the eventQueue was full. Some events may have been lost.")),n.forEach((function(n){return Mn(t,e,n)})),Ln[t]=e},qn=2e3,Fn=[],Un=function(){return[].concat(Fn)};function Vn(t){return Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vn(t)}function Nn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Vn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Vn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Vn(o)?o:String(o)),r)}var o}var Kn=function(){function t(e,n,r,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.input=e,this.interfaceType=n,this.interfaceVersion=r,this.internal=o,this.targets=i}var e,n;return e=t,(n=[{key:"preProcess",value:function(t){}},{key:"process",value:function(t){}}])&&Nn(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Gn(t){return Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gn(t)}function zn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Gn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Gn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Gn(o)?o:String(o)),r)}var o}function Wn(t,e){return Wn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wn(t,e)}function $n(t){return $n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$n(t)}var Hn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wn(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=$n(r);if(o){var n=$n(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Gn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"process",value:function(t){this._pushToQueue(t)}},{key:"_pushToQueue",value:function(t){if(!this.internal.hasFired){var e=this._getEvents(t);if(e&&0!==e.length){for(var n=F(),r=0;r<e.length;r++)e[r].data=C({eventCreationTimestamp:n},e[r].data);var o=this._getGlobalSchemaId(),i=this._getBusinessContext();xn.updateContext(),gn.updateContext(),a={schemaId:o,global:xn.context,businessContext:i,events:e,webContext:C(gn.context,this._getWebContext(t)),routing:{eventBusApiKey:this._getApiKey(),globalContextVersion:xn.version,hasConversion:this._hasConversion(),targets:this.targets}},D(a),Fn.push(a),function(t){for(var e=0,n=Object.entries(Ln);e<n.length;e++){var r=(c=2,function(t){if(Array.isArray(t))return t}(a=n[e])||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,f=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){f=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(f)throw o}}return c}}(a,c)||function(t,e){if(t){if("string"==typeof t)return Rn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rn(t,e):void 0}}(a,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];try{Mn(o,i,t)}catch(t){g("Failed to push datalayer event batch to subscriber (".concat(o,")"),t)}}var a,c}(a),Fn.length>qn&&Fn.shift(),this.internal.hasFired=!0}}var a}},{key:"_getSchemaId",value:function(){}},{key:"_getEvents",value:function(t){return[{schemaId:this._getSchemaId(),data:t}]}},{key:"_getGlobalSchemaId",value:function(){return jn()?"urn:shared:user:events:/v2":"urn:shared:user:events:/v1"}},{key:"_getBusinessContext",value:function(){}},{key:"_getApiKey",value:function(){return qt("eventBus","sccApiKey")}},{key:"_hasConversion",value:function(){}},{key:"_getWebContext",value:function(t){}}])&&zn(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Kn);function Qn(t){return Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qn(t)}function Jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Qn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Qn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Qn(o)?o:String(o)),r)}var o}function Zn(t,e){return Zn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zn(t,e)}function Xn(t){return Xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xn(t)}const Yn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zn(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Xn(r);if(o){var n=Xn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Qn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"_getBusinessContext",value:function(){return this.input.businessContext}},{key:"_getEvents",value:function(){return this.input.events}},{key:"_getApiKey",value:function(){return this.input.apiKey}},{key:"_getGlobalSchemaId",value:function(){return this.input.schemaId}}])&&Jn(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Hn);var tr="urn:shared:user:event:/data-platform/signals/click/v1",er="urn:shared:user:event:/data-platform/signals/impression/v1",nr="urn:shared:user:event:/data-platform/signals/element-action/v1",rr="urn:shared:user:event:/data-platform/signals/traffic-event/v1",or="urn:shared:user:event:/data-platform/signals/page-view/v1",ir="urn:shared:user:event:/data-platform/signals/ecommerce/add-to-cart/v1",ar="urn:shared:user:event:/data-platform/signals/ecommerce/checkout-progress/v1",cr="urn:shared:user:event:/data-platform/signals/ecommerce/remove-from-cart/v1",ur="urn:shared:user:event:/data-platform/signals/ecommerce/transaction/v2",fr="urn:shared:user:event:/data-platform/signals/experiment-assignment/v1",sr="urn:shared:user:event:/rigor/page-navigation/v1",lr="urn:shared:user:event:/rigor/page-navigation-delayed/v1",pr="urn:shared:user:event:/data-platform/signals/conversion/v1",yr="urn:shared:user:event:/appconfig/id-percentage-evaluation/v1",vr=/[^a-z0-9\_\/\.\-]/g,dr=/^([a-z0-9_\-]+)\.([a-z0-9_\-]+)\.(([a-z0-9_\/\-]+)\.)?([a-z0-9_\/\-]+)\.([a-z0-9_\-]+)\.([a-z0-9_\-]+)$/g,br=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.eid,n=t.customProperties,r=t.eventCategory;return C({pageLevelProperties:C(Gt),identityRealm:qt("identity","realm")},e&&{eid:e},n&&{customProperties:n},r&&{eventCategory:r})},mr=function(t,e,n,r){var o={traffic:br({eid:e,customProperties:r}),producerEventId:t};if(e){var i=function(t){return t.split(".")}(e),a=function(t){return t[t.length-1]}(i);(function(t){return!!(t.match(dr)&&t.length<=500)})(e)&&function(t,e,n){return e===n&&t.length>=5&&t.length<=6}(i,a,n)&&(o.element=function(t,e){var n=6===t.length?1:0,r={area:t[0],product:t[1],section:t[2+n],widget:t[3+n]};return["impression","click"].includes(e)||(r.action=e),r}(i,a))}return o},hr=function(t,e,n,r){null!=r&&null!=n&&0!==r&&0!==n&&n>r&&(t[e]=Math.round(n-r))},gr=function(t,e,n,r){var o=Y(e);!function(t,e){hr(t,"pageLoadTime",e.loadEventStart,e.navigationStart),hr(t,"domContentLoadedTime",e.domContentLoadedEventStart,e.navigationStart),hr(t,"domInteractiveTime",e.domInteractive,e.navigationStart),hr(t,"pageDownloadTime",e.responseEnd,e.responseStart),hr(t,"domainLookupTime",e.domainLookupEnd,e.domainLookupStart),hr(t,"serverResponseTime",e.responseStart,e.requestStart),hr(t,"serverConnectionTime",e.connectEnd,e.connectStart),hr(t,"redirectionTime",e.fetchStart,e.navigationStart)}(o,e);var i={navigationType:e.navigationType,timing:{navigation:o},traffic:br({customProperties:n}),producerEventId:t,contentLoadType:r};return"hard"===r&&(i.response=tt(e),i.timing.marks=e.marks,i.timing.measures=e.measures,i.timing.paint={firstPaint:e.fp,firstContentfulPaint:e.fcp,largestContentfulPaint:e.lcp}),i},wr=function(t,e,n){return{timing:{paint:{largestContentfulPaint:e.LCP},vitals:{cumulativeLayoutShift:e.CLS,firstInputDelay:e.FID,timeToInteractive:e.timeToInteractive}},traffic:br({customProperties:n}),producerEventId:t}};function Or(t){return Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Or(t)}function jr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Or(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Or(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Or(o)?o:String(o)),r)}var o}function Sr(t,e){return Sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Sr(t,e)}function _r(t){return _r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_r(t)}const Pr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sr(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=_r(r);if(o){var n=_r(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Or(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,n=[{key:"_getSchemaId",value:function(){return nr}},{key:"_getActionType",value:function(t){return t.element.action}},{key:"_getEvents",value:function(t,e){var n=t.traffic||{};return n.eid=this._buildLegacyEid(this._getActionType(t),t.element,n.eid),[{schemaId:this._getSchemaId(),data:C(t,{producerEventId:e||this.internal.eventId,element:t.element,traffic:br(n)})}]}},{key:"_buildLegacyEid",value:function(t,e){return arguments.length>2&&void 0!==arguments[2]?arguments[2]:"".concat(e.area,".").concat(e.product,".").concat(e.section,".").concat(e.widget,".").concat(t)}},{key:"_transformLegacyPromo",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.eid,o=n.customProperties,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{id:i.id,name:i.name,creative_name:i.creative,creative_slot:i.position,type:t,properties:o,eid:this._buildLegacyEid(t,e,r)}}},{key:"_isPromo",value:function(t){return t.promotion&&Object.keys(t.promotion).length>0}}],n&&jr(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Hn);function Er(t){return Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Er(t)}function kr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Er(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Er(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Er(o)?o:String(o)),r)}var o}function Tr(t,e){return Tr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Tr(t,e)}function Cr(t){return Cr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Cr(t)}const xr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tr(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Cr(r);if(o){var n=Cr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Er(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"_getSchemaId",value:function(){return tr}},{key:"_getActionType",value:function(){return"click"}}])&&kr(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Pr);function Ir(t){return Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ir(t)}function Rr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Lr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Ir(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ir(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Ir(o)?o:String(o)),r)}var o}function Dr(){return Dr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Mr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Dr.apply(this,arguments)}function Ar(t,e){return Ar=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ar(t,e)}function Mr(t){return Mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Mr(t)}const Br=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ar(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Mr(r);if(o){var n=Mr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ir(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"_getSchemaId",value:function(){return er}},{key:"_getActionType",value:function(){return"impression"}},{key:"_getEvents",value:function(t){var e=this,n=[];return t.impressions.forEach((function(t){var r;n.push.apply(n,function(t){if(Array.isArray(t))return Rr(t)}(r=Dr(Mr(a.prototype),"_getEvents",e).call(e,t,ee()))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return Rr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rr(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})),n}}])&&Lr(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Pr);function qr(t){return qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qr(t)}function Fr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==qr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==qr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===qr(o)?o:String(o)),r)}var o}function Ur(t,e){return Ur=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ur(t,e)}function Vr(t){return Vr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vr(t)}var Nr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ur(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Vr(r);if(o){var n=Vr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===qr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"process",value:function(t){x(t.config),T(t.config,(function(e,n){if(!t.overwrite){var r=Dt.get(e);U(r)?n=[].concat(r,n):"object"===qr(r)&&(n=C(r,n))}Dt.set(e,n)}))}}])&&Fr(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Kn);function Kr(t){return Kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kr(t)}function Gr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Kr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Kr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Kr(o)?o:String(o)),r)}var o}function zr(t,e){return zr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zr(t,e)}function Wr(t){return Wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wr(t)}var $r=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zr(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Wr(r);if(o){var n=Wr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Kr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"process",value:function(t){Bn(t.name,{callback:t.callback,schemaIds:t.schemaIds,batch:t.batch,fields:t.fields})}}])&&Gr(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Kn);function Hr(t){return Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hr(t)}function Qr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Hr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Hr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Hr(o)?o:String(o)),r)}var o}function Jr(){return Jr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Jr.apply(this,arguments)}function Zr(t,e){return Zr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zr(t,e)}function Xr(t){return Xr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xr(t)}var Yr,to,eo=function(t){var e={};if(U(t))for(var n=0;n<t.length;n++){var r=t[n];U(r)&&(e[r[0]]=I(r))}return e},no=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zr(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Xr(r);if(o){var n=Xr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Hr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"setTDataString",value:function(t){Jr(Xr(a.prototype),"merge",this).call(this,function(t){return R(t,"^",",")}(t))}},{key:"stringify",value:function(){var t,e=x(this.getProperties());(t=e)&&T(t,(function(e,n){var r=(e+"").split(".").join("_");delete t[e],t[r]=n}));var n=L(e,"^",",");if(n)return n}},{key:"set",value:function(t,e){"object"!==Hr(e)&&"[object Function]"!=={}.toString.call(e)?Jr(Xr(a.prototype),"set",this).call(this,t,e):g("Invalid key/value pair found in Traffic's custom properties (tData). Objects, arrays, and functions are not supported.\n\nKey: '".concat(t,"' Value: '").concat(e,"' Type: '").concat(Hr(e),"'."))}}])&&Qr(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(W),ro=function(t){var e=new no;return e.merge(t.custom_properties),t.traffic&&e.merge(t.traffic.customProperties),e},oo=function(t){var e=t.traffic;return e&&function(t,e){var n=t.eid||e&&e();if(!n)throw"";if(t.eid=n.toLowerCase(),function(t){return t.match(vr)}(t.eid))throw t.eid,""}(e),t},io=function(){return Math.floor(2147483647*Math.random())};function ao(t){return ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ao(t)}function co(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==ao(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ao(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===ao(o)?o:String(o)),r)}var o}function uo(t,e){return uo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},uo(t,e)}function fo(t){return fo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fo(t)}var so=0,lo=function(){var t=Dt.get("components");if(to!==t)return to=t},po=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uo(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=fo(r);if(o){var n=fo(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ao(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"_getWebContext",value:function(){return{pageViewCount:so}}},{key:"_getEvents",value:function(t){var e=ro(t);return[{schemaId:or,data:{forensics:{traceIdAdopted:M(tn.get("traced")),components:lo()},traffic:br({customProperties:e.getProperties()}),producerEventId:this.internal.eventId}}]}},{key:"preProcess",value:function(t){var e=t.path||t.virtual_path||t.virtualPath,n=void 0!==e;if(n||(e=s().location.pathname),Yr===e)throw"cmd: LogPageRequest duplicate page request detected, ignoring duplicate path";Yr=e,tn.set("corrid",io()),n&&(Ht(),tn.set("virtual_path",e)),en.incrementPageCount(),so+=1,tn.get("trace_id")||tn.merge(un())}}])&&co(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Hn),yo=function(t){return[(new Ae).map("element",[new De("area").required().pattern(be),new De("product").required().pattern(be),new De("section").required().pattern(me),new De("widget").required().pattern(be)]).required().extend(t)]},vo=function(t){return[(new Ae).map("traffic",[new Le("customProperties")]).extend(t)]},bo=function(){return[(new Ae).substitute(vo([new Le("eid")]))]},mo=function(){return[(new Ae).substitute(yo()),(new Ae).substitute(bo()),(new Ae).map("promotion",[new Le("id").required(),new Le("name"),new Le("creative"),new Le("position")]),(new Ae).map("product",[new Le("actionCode").required().allowedValues(["add_to_cart","product_detail"]),(new Ae).map("basket",[new Le("couponCode"),new Le("currencyCode"),new Le("itemTrackingCode")]),(new Me).map("products",[new Le("productId").required(),new Le("productName"),new Le("productInstanceId"),new Le("priceUsd"),new Le("quantity").required(),new Le("couponCode"),new Le("itemTrackingCode")]),(new Me).map("packages",[new Le("id"),new Le("priceUsd"),new Le("quantity"),new Le("category")])])]};const ho={add_click:{v1:{handler:xr,properties:[(new Ae).substitute(mo()).transform(oo)]}},add_element_action:{v1:{handler:Pr,properties:[(new Ae).substitute([(new Ae).substitute(yo([new Le("action").required().allowedValues(["blur","drag","focus","hover","load","scroll"])])),(new Ae).substitute(bo())]).transform(oo)]}},add_impressions:{v1:{handler:Br,properties:[(new Me).map("impressions",[(new Ae).substitute(mo()).transform(oo)]).withMinElements(1)]}},add_virtual_page_view:{v1:{handler:po,properties:[new Le("virtualPath").required(),(new Ae).substitute(vo())]}},add_micro_events:{v1:{handler:Yn,properties:[new Le("apiKey").required(),new Le("schemaId").required(),(new Me).map("events",[new Le("schemaId").required(),new Le("data").required()]).withMinElements(1),(new Ae).map("businessContext",[new Le("schemaId").required(),new Le("data").required()])]}},subscribe:{v1:{handler:$r,properties:[new Le("name").required(),new Le("callback").required(),new Le("schemaIds"),new Le("fields"),new Le("batch")]}},set_config:{v1:{handler:Nr,properties:[(new Ae).map("config",[(new Me).map("components",[new Le("name").required(),new Le("version").required().outputType(de)]),(new Ae).map("cookie",[new Le("sameSite")]),(new Ae).map("page",[new Le("spa"),new Le("id"),new Le("contentGroup"),new Le("referrerExclusion")]),(new Ae).map("identity",[new Le("realm")]),(new Ae).map("site",[new Le("privateLabelId")]),(new Ae).map("timing",[new Le("auto")])]).required(),new Le("overwrite")]}}};function go(t){return go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},go(t)}function wo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Oo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wo(Object(n),!0).forEach((function(e){jo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function jo(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==go(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==go(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===go(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var So=function(t,e){var n=sn.get(fn)||{};sn.set(fn,Oo(Oo({},n),{},jo({},t,e)))};function _o(t){return _o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_o(t)}function Po(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Eo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Po(Object(n),!0).forEach((function(e){var r,o,i;r=t,o=e,i=n[e],(o=function(t){var e=function(t,e){if("object"!==_o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==_o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===_o(e)?e:String(e)}(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Po(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}Bn("scc-experiment-listener",{callback:function(t){var e=t.event,n=e.data;if(e.schemaId===fr)So(n.experimentId,n.variantId);else if(e.schemaId===yr&&"hivemind"===n.fqAppId){var r=JSON.parse(n.settingValue);So(n.setting,r.cohortId)}},schemaIds:[fr,yr]});var ko=!1,To=function(t){var e=t.trfqMethods,n=t.legacyName,r=t.dataLayerConfig,o=t.globalContextConfig,i=t.hooks,a=i.onLoad,c=i.beforeLoad,u=i.beforeEvent,f=i.getEnvironment;if(!ko){ko=!0,Ft("build","env",f&&f()||qt("build","env")),tn.merge(un()),xn.init(Eo({traceId:tn.get("trace_id")},o)),ve(ho),function(){var t=s();if(t.PerformanceObserver){var e=new t.PerformanceObserver((function(t){var e=t.getEntries(),n=e[e.length-1];n.renderTime&&(H.lcp=Math.round(n.startTime))}));try{e.observe({type:"largest-contentful-paint",buffered:!0})}catch(t){}}}();var p=new ut("complete"===l().readyState,(function(t){s().addEventListener("load",t)}));en.getSession(),c&&c();var y=new We(Eo({autoPageViewDisabled:Dt.get("".concat(n,".manualPageRequest")),beforeEvent:u},r));p.registerOnLoadFn((function(){a&&a(),y.start(),new Ye(e),qt("timing","auto")&&function(t,e,n){if(!ot)if(ot=!0,rt())nt(t,et(t,e),n);else var r=setInterval((function(){rt()&&(clearInterval(r),nt(t,et(t,e),n))}),250)}(n,"auto"),qt("eventBus","enabled")&&(S(Et,[]),Pt=new _t(kt),s()._signalsDataLayer=s()._signalsDataLayer||[],s()._signalsDataLayer.push({schema:"subscribe",data:{name:"scc-plugin-sink-event-bus",batch:!0,fields:["routing"],callback:function(t){var e=t.schemaId,n=t.global,r=t.businessContext,o=t.events,i=t.routing,a=i.eventBusApiKey,c=i.hasConversion,u=i.globalContextVersion;Pt.pushEvent({apiKey:a,businessContext:r,contextVersion:u,schemaId:e,global:n,events:o},c)}}}))})),h("SCC STARTED",Dt.getProperties())}};function Co(t){return Co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Co(t)}function xo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Io(r.key),r)}}function Io(t){var e=function(t,e){if("object"!==Co(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Co(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Co(e)?e:String(e)}function Ro(t){return Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ro(t)}function Lo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bo(r.key),r)}}function Do(t,e){return Do=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Do(t,e)}function Ao(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mo(t){return Mo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Mo(t)}function Bo(t){var e=function(t,e){if("object"!==Ro(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ro(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Ro(e)?e:String(e)}var qo="_tccl_visitor",Fo="_tccl_visit",Uo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Do(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Mo(r);if(o){var n=Mo(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ro(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ao(t)}(this,t)});function a(){var t,e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return e=Ao(t=i.call.apply(i,[this].concat(c))),r="_scc_session",(n=Bo(n="_sessionCookieName"))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,t}return e=a,(n=[{key:"getSession",value:function(){var t=an(qo),e=an(Fo);t||e?(t||(t=ee()),e||(e=ee())):t=e=ee(),on(qo,t,525600,"/"),on(Fo,e,30,"/");var n=cn(this._sessionCookieName);return{visitorGuid:t,visitGuid:e,pageCount:B(n.pc)||0}}}])&&Lo(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(function(){function t(){var e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,r=void 0,(n=Io(n="_sessionCookieName"))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}var e,n;return e=t,(n=[{key:"getSession",value:function(){}},{key:"saveSessionCookie",value:function(t){var e=L(t,"&","=");on(this._sessionCookieName,e,20,"/")}},{key:"incrementPageCount",value:function(){var t=cn(this._sessionCookieName),e=B(t.pc)||0;t.pc=e+1,t.C_TOUCH=F(),this.saveSessionCookie(t)}}])&&xo(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());function Vo(t){return Vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vo(t)}function No(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Vo(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Vo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Vo(o)?o:String(o)),r)}var o}function Ko(t,e){return Ko=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ko(t,e)}function Go(t){return Go=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Go(t)}var zo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ko(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Go(r);if(o){var n=Go(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Vo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"_getEvents",value:function(t){var e=t.eid,n=t.type.toLowerCase(),r=function(t){return"click"===t?tr:"impression"===t?er:["blur","drag","focus","hover","load","scroll"].includes(t)?nr:rr}(n),o=ro(t).getProperties();return[{schemaId:r,data:r!==rr?mr(this.internal.eventId,e,n,o):{traffic:br({customProperties:o,eid:e,eventCategory:n}),producerEventId:this.internal.eventId}}]}}])&&No(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Hn);function Wo(t){return Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wo(t)}function $o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Wo(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Wo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Wo(o)?o:String(o)),r)}var o}function Ho(t,e){return Ho=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ho(t,e)}function Qo(t){return Qo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qo(t)}var Jo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ho(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Qo(r);if(o){var n=Qo(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Wo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"_getApiKey",value:function(){return vt("eventBus","rigorApiKey")}},{key:"_getEvents",value:function(t){var e=t.is_hard_navigation?"hard":"soft",n=t.timing_object;if(n){if(n.navigationStart)return[{schemaId:sr,data:gr(this.internal.eventId,n,t.custom_properties,e)}];if(n.timeToInteractive)return[{schemaId:lr,data:wr(this.internal.eventId,n,t.custom_properties)}]}}}])&&$o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Hn),Zo=function(){return[new Le("custom_properties").optional()]};const Xo={add_event:{v1:{handler:zo,properties:[new Le("type").required(),(new Ae).substitute([new Le("eid").optional()]),(new Ae).substitute(Zo())]}},add_page_view:{v1:{handler:po,properties:[new Le("path").optional(),(new Ae).substitute(Zo())]}},add_perf:{v1:{handler:Jo,properties:[new Le("timing_object").required(),new Le("is_hard_navigation").optional(),(new Ae).substitute(Zo())]}}},Yo=function(t,e,n){s()._expDataLayer.push({schema:"add_event",version:"v1",data:{type:t,eid:e,custom_properties:eo(n)}})},ti=function(t,e){s()._expDataLayer.push({schema:"add_perf",version:"v1",data:{timing_object:t,custom_properties:eo(e)}})};var ei="traffic.tcc.instrumentation.navigation.timing",ni="click",ri="impression",oi=function(t,e){var n=e.data,r=n.traffic.eid,o=n.element,i=void 0===o?{}:o,a=i.area,c=i.product,u=i.section,f=i.widget;return null!=r?r:"".concat(a,".").concat(c,".").concat(u,".").concat(f,".").concat(t)},ii=function(t){var e=t.data,n=e.element,r=e.traffic.eid;return n?n.action:r.split(".").pop()},ai=function(t){var e,n;switch(t.schemaId){case ur:return function(t,e,n){var r=n.newCustomerFlag,o=n.newVsRenewal;t=t||"modular-cart";var i=e?"payment-pending_":"payment-processed_";return"ecomm.payments.transaction.".concat(r?"new-customer_":"existing-customer_").concat(i).concat(o,".").concat(t,".success")}(null===(e=t.data.cart)||void 0===e?void 0:e.type,null===(n=t.data.payment)||void 0===n?void 0:n.pendingFlag,t.data.order);case ir:return"gpd.exp.tcc.add-to-cart.success";case cr:return"gpd.exp.tcc.remove-from-cart.success";case ar:return 1===t.data.checkout.step?"gpd.exp.tcc.begin-checkout.success":"gpd.exp.tcc.checkout-progress.success";case fr:return"traffic.tcc.instrumentation.experiment.add_experiment";case pr:return"".concat("tcc.conversion.").concat(t.data.conversion.area,".").concat(t.data.conversion.product,".").concat(t.data.conversion.revenue,".").concat(t.data.conversion.action);case rr:return t.data.traffic.eid;case nr:return oi(ii(t),t);case tr:return oi(ni,t);case er:return oi(ri,t);case sr:case lr:return ei}},ci=function(t){switch(t.schemaId){case sr:case lr:return"pageperf";case rr:return t.data.traffic.eventCategory;case pr:return"genConv";case ur:case ir:case cr:case ar:return"ecommerce";case fr:return"experiment";case nr:return ii(t);case tr:return ni;case er:return ri}},ui="perf",fi="pageevent",si=function(t){var e=t.schemaId,n=t.data;switch(e){case or:return"pageview";case sr:case lr:return ui;case rr:return n.traffic.eid===ei?ui:fi;default:return fi}};function li(t){return li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},li(t)}var pi,yi="_trfqSendLog",vi=[or,tr,er,rr,nr,lr,sr],di=function(t){var e=t.events,n=t.global,r=t.webContext,o=function(t){var e,n,r=t.traceId,o=t.context,i=t.client,a=t.page;return{dh:a.host,dr:(n=a.referrer,void 0!==n?n.substring(0,1e3):void 0),ua:i.userAgent,client_name:i.sdk.name,cv:i.sdk.version,vg:o.sessionId,vtg:o.visitorId,dp:(e=a.path,e?(/\/$/.test(e)&&(e=e.substring(0,e.length-1)),"/"!==e[0]&&(e="/".concat(e)),e):"notspecified"),trace_id:r}}(n);e.forEach((function(t){var e=t.schemaId,i=t.data,a=C(o,function(t){var e=t.schemaId,n=t.webContext,r=t.data,o=r.eventCreationTimestamp,i=r.producerEventId,a=r.traffic,c=a.customProperties,u=a.pageLevelProperties,f=void 0===u?{}:u,s=new no(c),l=new W({cts:o,hit_id:i,ea:ci(t),ht:si(t),eid:ai(t),trfd:JSON.stringify(f),usrin:s.stringify(),ap:f.ap?f.ap:"not_set",vci:n.pageCorrelationId,z:io()});return e!==sr&&e!==lr||function(t,e){var n=e.schemaId,r=e.data,o=r.navigationType,i=r.contentLoadType,a=r.timing,c=a.navigation,u=a.vitals,f=void 0===u?{}:u,s=a.paint,l=void 0===s?{}:s;n===sr?t.merge({tce:c.connectEnd,tcs:c.connectStart,tdc:c.domComplete,tdclee:c.domContentLoadedEventEnd,tdcles:c.domContentLoadedEventStart,tdi:c.domInteractive,tdl:c.domLoading,tdle:c.domainLookupEnd,tdls:c.domainLookupStart,tfs:c.fetchStart,tns:c.navigationStart,trqs:c.requestStart,tre:c.responseEnd,trps:c.responseStart,tles:c.loadEventStart,tlee:c.loadEventEnd,nt:o,LCP:l.largestContentfulPaint}):n===lr&&(i="hard",t.merge({LCP:l.largestContentfulPaint,CLS:f.cumulativeLayoutShift,FID:f.firstInputDelay,timeToInteractive:f.timeToInteractive})),t.set("nav_type",i)}(l,t),l.getProperties()}({schemaId:e,data:i,webContext:r,global:n}));!function(t,e){var n,r,o=ht("events.api")+e,i=(r={},T(t,(function(t,e){void 0!==e&&"object"!==li(e)&&"[object Function]"!=={}.toString.call(e)&&(r[t]=e)})),n={},T(r,(function(t,e){void 0!==e&&(n[t]=encodeURIComponent(e))})),n),a=function(t,e){var n=-1===e.indexOf("?")?"?":"&",r=L(t,"&","=");return"".concat(e).concat(n).concat(r)}(i,o);yt(a,L(i,"&","="),"GET",null,yi)}(a,"/t/1/tl/event")}))},bi={session:function(){return en.getSession()}},mi={pageCorrelationId:function(){return tn.get("corrid")}},hi="tccl";return pi=new Uo,en=pi,ve(Xo),function(t){var e=t.legacyName,n=t.configManagerProps,r=t.hooks.beforeInit;!function(o){try{var i,a=l().cookie;Object.defineProperty(document,"cookie",{get:function(){return a},set:function(t){(i=i||Object.getOwnPropertyDescriptor(Document.prototype,"cookie")).set.call(document,t),a=i.get.call(document)},configurable:!0,enumerable:!0}),function(){if(a=p().userAgent.toLowerCase(),!/msie [1-8]\./.test(a))if(i="_".concat(e,"Internal"),u=i,void 0!==s()[u]||(s()[u]={},0))g("SCC Library has already been loaded on page");else if(function(t){var e=t.dataLayerName,n=t.clientConfigPrefixes,r=t.ignoredProperties,o=t.legacyName;At=o,Nt=r||[],Bt=e,Vt=n,Mt=s()[Bt]||[],_(Bt,Mt),S("".concat(Bt,"Log"),Kt),Ht()}(n),r&&r(),"off"!==Dt.get("".concat(e,".status"))){var o=l();"prerender"!==o.visibilityState?To(t):o.addEventListener("visibilitychange",(function(){"prerender"!==o.visibilityState&&"unloaded"!==o.visibilityState&&To(t)}))}var i,a}()}finally{delete l().cookie}}()}({legacyName:hi,trfqMethods:r,configManagerProps:{legacyName:hi,dataLayerName:"_trfd",clientConfigPrefixes:[hi]},dataLayerConfig:{pageViewSchema:"add_page_view",autoPageViewDisabled:!1,immediateSchemas:["add_page_view"]},globalContextConfig:{contextFnMap:{"context.userType":function(){return"c2"},"context.visitorId":function(t){return t.session.visitorGuid},"context.sessionId":function(t){return t.session.visitGuid},"page.sessionPageViewCount":function(t){return t.session.pageCount}},paramsFnMap:bi},hooks:{getEnvironment:function(){var t=Dt.get("".concat(hi,".baseHost"));if(t)return"secureserver.net"===t?"prod":"test-secureserver.net"===t?"test":"dev"},onLoad:function(){S(yi,[]),s()._signalsDataLayer=s()._signalsDataLayer||[],s()._signalsDataLayer.push({schema:"subscribe",data:{name:"scc-plugin-sink-event-service",batch:!0,callback:di,schemaIds:vi,fields:["webContext"]}})},beforeLoad:function(){gn.init({contextFnMap:mi})}}}),e})()));